apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  annotations:
    deployment.kubernetes.io/revision: "13"
  creationTimestamp: 2018-03-13T04:35:24Z
  generation: 13
  labels:
    deployed-by: einlain-cli
    name: subot-dev--subscribe-sqs
  name: subot-dev--subscribe-sqs
  namespace: default
  resourceVersion: "136967907"
  selfLink: /apis/extensions/v1beta1/namespaces/default/deployments/subot-dev--subscribe-sqs
  uid: f28703a7-2677-11e8-836a-065444c98836
spec:
  progressDeadlineSeconds: 600
  replicas: 1
  revisionHistoryLimit: 2
  selector:
    matchLabels:
      deployed-by: einlain-cli
      name: subot-dev--subscribe-sqs
  strategy:
    rollingUpdate:
      maxSurge: 25%
      maxUnavailable: 25%
    type: RollingUpdate
  template:
    metadata:
      creationTimestamp: null
      labels:
        deployed-by: einlain-cli
        name: subot-dev--subscribe-sqs
    spec:
      containers:
      - command:
        - /bin/bash
        - -c
        - ln -s /tmp/secrets/subot-aws-config/* /etc/aws.json && subot subscribe-sqs
          --secret-file /etc/aws.json ${SQS_QUEUE_NAME}
        env:
        - name: SQS_QUEUE_NAME
          value: economist-apply-dev
        - name: EINBOT_URL
          value: http://einbot-alpha.lain.ein.plus/api/internal
        - name: ECONOMIST_URL
          value: http://economist-dev.lain.ein.plus/api/internal
        - name: OVERLORD_URL
          value: http://overlord-dev.lain.ein.plus/api
        - name: FORMALIN_URL
          value: http://formalin-dev.lain.ein.plus/api/v1
        - name: WORKER_SENTRY_DSN
          value: http://bd4038db2a3d463e914618c3bb40979a:1ba17bb8e6764778af3d7c6b2bd7529e@sentry.in.einplus.cn/111
        - name: LVAULT_PHASE
          value: dev
        image: registry.lain.ein.plus/subot:latest
        imagePullPolicy: Always
        name: subot-dev--subscribe-sqs
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /tmp/secrets/subot-aws-config
          name: subot-aws-config
        - mountPath: /var/run/docker.sock
          name: docker-sock
      dnsPolicy: ClusterFirst
      hostNetwork: true
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
      volumes:
      - name: subot-aws-config
        secret:
          defaultMode: 420
          secretName: subot-aws-config
      - hostPath:
          path: /var/run/docker.sock
        name: docker-sock
